// Copyright (c) 2021-2023 Drew Edwards
// This file is part of KanjiSchool under AGPL-3.0.
// Full details: https://github.com/Lemmmy/KanjiSchool/blob/master/LICENSE

.review-heatmap.d3 {
  min-width: min-content;
  margin: 0 auto;

  .year-label, .month-label, .day-label {
    fill: @text-color-secondary;
  }

  .year-label {
    text-anchor: middle;
    font-size: 13px;
    font-weight: bold;
  }

  .month-label text {
    text-anchor: start;
    font-size: 9px;
  }

  .day-label text {
    text-anchor: end;
    font-size: 10px;
  }

  .month-path {
    fill: none;
    stroke: lighten(@border-color-split, 15%);
    translate: -1px -1px;
  }

  g.days {
    .today {
      stroke: @green-base;
      stroke-width: 2px;
    }

    rect {
      cursor: pointer;

      &:hover {
        filter: brightness(1.5);
      }
    }
  }
}

.dashboard-review-heatmap-card {
  height: auto;
  flex: 0;

  .heatmap-card-inner {
    display: flex;
    justify-content: stretch;

    max-height: 200px;
    overflow-x: auto;
    overflow-y: auto;

    padding: @card-padding-base;
  }

  .heatmap-card-footer {
    display: flex;
    gap: @margin-sm;

    padding: @margin-sm @margin-md;

    background: lighten(@component-background, 2.5%);
    border-top: 1px solid @border-color-split;

    color: @text-color-secondary;
    font-size: @font-size-sm;

    .spacer { flex: 1; }

    .review-heatmap-tooltip {
      display: flex;
      flex-wrap: wrap;
      gap: @padding-sm;

      color: @text-color;

      .el {
        white-space: nowrap;
      }
    }

    .hover-hint {
      opacity: 0.75;
    }

    .heatmap-legend {
      display: flex;
      align-items: center;

      .legend-square {
        display: inline-block;

        width: 10px;
        height: 10px;

        white-space: nowrap;

        &:first-child {
          border-top-left-radius: @border-radius-base;
          border-bottom-left-radius: @border-radius-base;
        }

        &:last-child {
          border-top-right-radius: @border-radius-base;
          border-bottom-right-radius: @border-radius-base;
        }
      }

      .legend-label {
        display: inline-block;

        margin-left: @margin-xs;
        margin-right: @margin-sm;

        &:last-child {
          margin-right: 0;
        }
      }
    }
  }

  .ant-card-body {
    padding: 0;
  }

  .ant-card-head {
    padding-right: @padding-sm;
  }

  .ant-card-extra {
    padding: 0;
    align-self: stretch;

    .ant-btn {
      border: 0;
      height: calc(100% - 2px);
      margin: 1px 0;

      span:not(.ant-btn-loading-icon):not(.anticon) {
        line-height: 32px;
      }
    }
  }
}
