// Copyright (c) 2021-2022 Drew Edwards
// This file is part of KanjiSchool under AGPL-3.0.
// Full details: https://github.com/Lemmmy/KanjiSchool/blob/master/LICENSE

.session-results-alert {
  /* ------------------------------------------------------------------------ */
  /* Results summary row                                                      */
  /* ------------------------------------------------------------------------ */
  .results-summary {
    @results-summary-bg-color: @color-srs-locked;

    .results-summary-col {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      margin: 0 @padding-xss;
      padding: @padding-md;

      background: @results-summary-bg-color;
      border-radius: @border-radius-base;

      text-align: center;

      .value {
        font-weight: 500;
        font-size: @font-size-lg * 2;
      }

      .extra {
        color: @text-color-secondary;
        font-size: @font-size-lg * 1.3;
      }

      .label {
        display: block;
        color: @text-color-secondary;
      }

      &.col-rkv {
        color: @black;
        .extra, .label { color: @black; }
      }

      &.col-radical { background: @color-radical; }
      &.col-kanji { background: @color-kanji; }
      &.col-vocabulary { background: @color-vocabulary; }

      // Add an arrow to the 'answered correctly' column
      &.col-correct {
        margin-right: @margin-sm;

        position: relative;

        &:before {
          content: "";
          display: block;

          border-top: 24px solid transparent;
          border-bottom: 24px solid transparent;
          border-left: 32px solid @results-summary-bg-color;

          position: absolute;
          right: -32px;
          z-index: 2;
        }
      }

      &:first-child { margin-left: 0; }
      &:last-child { margin-right: 0; }
    }
  }

  .session-results-answers {
    margin-top: @margin-lg;

    .ant-divider-horizontal.ant-divider-with-text-left {
      margin: @margin-sm 0 @padding-xss 0;

      &::before {
        width: 32px;
        flex-shrink: 0;
      }

      &::after {
        width: 100%;
      }

      &:first-child {
        margin-top: 0;
      }

      .count-tag {
        position: relative;
        top: -2px;

        margin-right: @margin-sm;
        font-size: @font-size-sm;
        font-weight: normal;
      }
    }

    >.ant-collapse-item.results-answer-panel {
      &.correct >.ant-collapse-header {
        background: @green-2;
        &:hover { background: @green-3; }
        > .anticon { color: @green-base; }
      }

      &.incorrect >.ant-collapse-header {
        background: @red-2;
        &:hover { background: @red-3; }
        > .anticon { color: @red-base; }
      }

      >.ant-collapse-header {
        align-items: center;

        > .anticon {
          margin: 0 @margin-sm 0 4px;
        }
      }
    }
  }
}

.session-results-alert.ant-collapse-ghost {
  // Mimic the appearance of Card
  background: @card-background;

  >.ant-collapse-item >.ant-collapse-header {
    min-height: @card-head-height;
    padding: @card-head-padding @card-padding-base;
    background: @card-head-background;

    // In an ant-design update, this is now a flexbox. Revert it back
    display: block;

    // As above, the arrow icon needs to be made inline again. However, it has
    // no classes, so this is the best we can do
    >div:first-child { display: inline-block; }

    .title-main {
      color: @card-head-color;
      font-weight: 500;
      font-size: @card-head-font-size;
    }

    .title-extra {
      color: @text-color-secondary;
      font-size: @font-size-sm;
    }
  }

  >.ant-collapse-item >.ant-collapse-content {
    // border-top: 1px solid transparent;
    // transition: border-top-color @animation-duration-base ease;

    // &.ant-collapse-content-active {
    //   border-top: 1px solid @border-color-split;
    // }

    &>.ant-collapse-content-box {
      padding: @padding-xss @card-padding-base @card-padding-base @card-padding-base;
    }
  }
}
